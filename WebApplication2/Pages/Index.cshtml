@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
</div>

<div class="container">
    <div class="row p-1">
        <div class="col-1">User</div>
        <div class="col-5"><input type="text" id="userInput" value="@User.Identity.Name" readonly/></div>
    </div>
    <div style="display:flex"; justify-content: space-between; align-items:center; max-width: 600px; margin-bottom: 15px;">
        <form method="get" action="/Logout">
            <button type="submit">Log out</button>
                </form>
    </div>
    <div class="row p-1">
        <div class="col-1">To:</div>
        <div class="col-5">
            <select class="form-select" id="receiverInput">
            <option value="">Select user</option>
            @foreach (var user in Model.Users)
            {              
                <option value="@user.Username">@user.Username</option>
            }
            </select>
        </div>
    </div>
    <div class="row p-1">
        <div class="col-1">Message</div>
        <div class="col-5"><textarea class="w-100" id="messageInput" rows="2" style="resize: none;"></textarea></div>
     </div>
     <div class="row p-1">
         <div class="col-6" text-end>
                <input type="button" id="sendButton" value="Send Message" disabled/>
         </div>         
     </div>
     <div class="row p-1">
        <div class="col-6">
           <hr />
            </div>
            </div>
        <div class="row p-1">
            <div class="col-6">
                <ul id="messagesList" style="max-height: 300px; overflow-y:auto"></ul>
            </div>
            </div>

            <style>
               .message {
                    padding: 10px;
                    margin: 5px;
                    border-radius: 10px;
                    max-width: 60%;
                    word-wrap: break-word;
                    display: block;
                }
                .message-left {
                    background-color: #f1f0f0;
                    text-align: left;
                    margin-right: auto;
            }
                .message-right {
                    background-color: #cce5ff;
                    text-align: right;
                    margin-left: auto;
                }
                .message-time {
                    font-size: 0.75rem;
                    color: gray;
                    margin-top: 5px;
                }
            </style>
</div>


<script src="~/lib/microsoft/signalr/dist/browser/signalr.js"></script>
<script src="~/js/chat.js"></script>


